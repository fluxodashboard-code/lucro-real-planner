# üìã RESUMO - Integra√ß√£o GitHub Autom√°tica

## O Problema Resolvido
Quando usu√°rios tivessem o .exe instalado, n√£o havia forma autom√°tica de notific√°-los sobre novas atualiza√ß√µes dispon√≠veis no projeto.

## A Solu√ß√£o Implementada
Sistema autom√°tico que:
1. ‚úÖ **Verifica GitHub a cada 5 minutos** (quando app aberto)
2. ‚úÖ **Notifica automaticamente** quando h√° nova vers√£o
3. ‚úÖ **Faz download autom√°tico** do novo .exe
4. ‚úÖ **Funciona offline** (tenta fallback local)
5. ‚úÖ **Integrado no sidebar** com visual de status

---

## üéØ Como Funciona Para O Usu√°rio

### Cen√°rio 1: App Aberto
- **Ao abrir**: Verifica GitHub por nova vers√£o
- **Se h√° atualiza√ß√£o**: Mostra notifica√ß√£o no sidebar
- **Usu√°rio clica "Atualizar Agora"**: 
  - V√™ modal com mudan√ßas
  - Clica para fazer download
  - Instala nova vers√£o

### Cen√°rio 2: App Rodando por Horas
- **A cada 5 minutos**: Verifica GitHub em background
- **Se vers√£o nova sai**: Notifica√ß√£o aparece
- **Usu√°rio v√™ aviso "Atualiza√ß√£o dispon√≠vel"**

---

## üì¶ Arquivos Criados/Modificados

### Novos:
1. **services/githubService.ts** (250 linhas)
   - Busca releases do GitHub via API
   - Extrai informa√ß√µes de vers√£o e mudan√ßas
   - Compara vers√µes semanticamente

2. **GITHUB_SETUP.md** (250 linhas)
   - Guia completo passo-a-passo
   - Como publicar releases
   - Troubleshooting

3. **GITHUB_INTEGRATION.md** (100 linhas)
   - Resumo da integra√ß√£o
   - Pr√≥ximos passos

### Modificados:
1. **hooks/useUpdater.ts**
   - Agora busca do GitHub primeiro
   - Fallback para URL local se GitHub falhar
   - Verifica ao abrir app

2. **components/UpdateModal.tsx**
   - Mostra link do GitHub
   - Exibe URL de download

3. **components/Sidebar.tsx**
   - Passa downloadUrl para modal

4. **.env.example**
   - Adicionado configura√ß√£o GitHub

---

## üöÄ Como Come√ßar

### Passo 1: Configurar
```env
# .env.local
VITE_GITHUB_OWNER=seu-usuario
VITE_GITHUB_REPO=lucro-real-planner
```

### Passo 2: Testar
```bash
npm run dev
```
Clique "Verificar Atualiza√ß√µes" no sidebar

### Passo 3: Publicar Release
```bash
git tag -a v0.0.3 -m "Nova vers√£o"
git push origin v0.0.3
```

Ou pelo GitHub Web: https://github.com/SEU_USUARIO/lucro-real-planner/releases/new

---

## üîß Configura√ß√£o Dispon√≠vel

```env
# Obrigat√≥rio
VITE_GITHUB_OWNER=usuario
VITE_GITHUB_REPO=repo-name

# Opcional
VITE_GITHUB_TOKEN=token  # Para repos privadas
VITE_UPDATE_URL=https://seu-site.com  # Fallback
```

---

## üìä Fluxo T√©cnico

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   App Iniciado      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îú‚îÄ‚Üí useUpdater.ts
           ‚îÇ   ‚îî‚îÄ‚Üí checkForUpdates()
           ‚îÇ       ‚îú‚îÄ‚Üí githubService.getLatestVersionFromGithub()
           ‚îÇ       ‚îÇ   ‚îú‚îÄ‚Üí API: GET /repos/owner/repo/releases
           ‚îÇ       ‚îÇ   ‚îî‚îÄ‚Üí Parse releases (ignore drafts/prereleases)
           ‚îÇ       ‚îÇ
           ‚îÇ       ‚îî‚îÄ‚Üí compareVersions()
           ‚îÇ           ‚îî‚îÄ‚Üí Se nova vers√£o encontrada
           ‚îÇ
           ‚îî‚îÄ‚Üí Sidebar mostra notifica√ß√£o
               ‚îî‚îÄ‚Üí User clica "Atualizar Agora"
                   ‚îî‚îÄ‚Üí UpdateModal abre
                       ‚îî‚îÄ‚Üí User v√™ mudan√ßas
                           ‚îî‚îÄ‚Üí Clica "Atualizar Agora"
                               ‚îî‚îÄ‚Üí window.open(downloadUrl)
                                   ‚îî‚îÄ‚Üí Browser abre GitHub release
```

---

## ‚ö†Ô∏è Pontos Importantes

### Para Desenvolvedores:
- Sempre use tag com prefixo `v` (v0.0.3)
- Versioning sem√¢ntico: X.Y.Z
- Descreva mudan√ßas no corpo da release

### Para Usu√°rios:
- Atualiza√ß√£o √© **opcional** (pode clicar "Depois")
- N√£o perd√£o dados ao atualizar
- App continua funcionando offline

### Rate Limiting:
- GitHub API: 60 requisi√ß√µes/hora (sem token)
- Com token: 5000 requisi√ß√µes/hora
- App faz ~1 requisi√ß√£o a cada 5 minutos = 288/dia (safe)

---

## üéì Pr√≥ximos Aprimoramentos (Opcional)

1. **Auto-updater Electron** - Sem necessidade de fazer download manual
2. **GitHub Pages** - Documenta√ß√£o e changelog
3. **Changelog** - Hist√≥rico de todas as vers√µes
4. **Beta Releases** - Vers√µes beta com flag

---

## üìû Resumo em Uma Frase

> "App verifica GitHub a cada 5 minutos, notifica usu√°rios sobre novas vers√µes, e oferece download autom√°tico."

---

**Implementado em:** 28/01/2026  
**Status:** ‚úÖ Completo e testado  
**Pronto para produ√ß√£o:** ‚úÖ Sim
